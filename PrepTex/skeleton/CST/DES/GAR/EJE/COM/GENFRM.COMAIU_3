$ P1:
$	IF P1 .NES. "" THEN GOTO P2
$	IF F$MODE() .EQS. "BATCH" THEN EXIT
$	INQUIRE P1 "Archivo ? "
$	GOTO P1
$ P2:
$	IF P2 .EQS. "" THEN GOTO VSM
$	IF ( P2 .EQS. "VSAM" ) .OR. ( P2 .EQS. "SUPRA" ) THEN GOTO MAIN
$	IF F$MODE() .EQS. "BATCH" THEN EXIT
$	INQUIRE P2 "SUPRA/VSAM ? "
$	GOTO P2
$ VSM:
$	P2 = "VSAM"
$
$ MAIN:
$	ON ERROR	THEN GOTO ERR
$	ON WARNING	THEN GOTO ERR
$	ON CONTROL_Y	THEN GOTO ERR
$	GNS$MAP = P2
$	IF F$MODE() .EQS. "BATCH" THEN 'BAT'
$	WRITE SYS$OUTPUT "[5m[1m",-
	"		Generando...[0m"
$	IF F$LOCATE("/F",P1) .NES. F$LENGTH(P1) THEN GOTO LIB
$	@GNSCOM:FIL 'P1'
$	P2 = GNS$FIL
$	GOTO CON
$ LIB:
$	P2 = F$EXTRACT(F$LOCATE("=",P1)+1,F$LENGTH(P1),P1)
$ CON:
$!	ASS MAP'P2'.LOG SYS$OUTPUT
$!	ASS MAP'P2'.LOG SYS$ERROR
$	FMS/DESCRIPTION 'P1'/OUTPUT='P2'.FLG
$	PTH = P2 + ".FLG"
$!JSS	RUN GNSEXEAIU:GENFRM
$	RUN GAREXE:GENFRM
$!	FMSINS 'P1'
$ FIN:
$	SET NOON
$	DELETE/NOLOG/NOCONFIRM	'P2'.FLG;
$!	DEASS SYS$OUTPUT
$!	DEASS SYS$ERROR
$!	DELETE/NOLOG/NOCONFIRM	MAP'P2'.LOG;
$	EXIT
$ ERR:
$	SET NOCONTROL=Y
$	SET NOON
$	DELETE/NOLOG/NOCONFIRM	'P2'.FLG;
$!	DEASS SYS$OUTPUT
$!	DEASS SYS$ERROR
$	WRITE SYS$OUTPUT "[1m[A[K ERROR[0m"
$!	TYPE MAP'P2'.LOG
$	SET CONTROL=Y
