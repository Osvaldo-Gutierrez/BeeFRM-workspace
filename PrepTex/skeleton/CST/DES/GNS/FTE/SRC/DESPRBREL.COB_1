IDENTIFICATION DIVISION.
*=======================
PROGRAM-ID.	DESPRBREL.
AUTHOR. 	GUZMAN Y CIA.

* Prueba subrutina Generadora de Proceso ante el cambio de una Entidad

ENVIRONMENT DIVISION.
*====================

DATA DIVISION.
*=============

WORKING-STORAGE SECTION.
*-----------------------
COPY	FIOWSS	IN	DESTXT.
COPY	'DESREG.CTL'	FROM	DICTIONARY
	REPLACING
	==CTL==	BY 	==CTL EXTERNAL==.
01 WSS-SECT.
	03 WSS-ENTI.
		05 WSS-TENT			PIC X(01).
		05 WSS-MODU			PIC X(12).
		05 WSS-BIBL			PIC X(06).
	03 WSS-STAT				PIC 9(01).
		88 WSS-STAT-OKS		VALUE 0.
	03 WSS-MENS				PIC X(80).

PROCEDURE DIVISION.
*==================

MAIN SECTION.
*------------
INI-MAIN.
	CALL 'DESFIOREL' USING '<INP>'.
	MOVE 'BCH' TO FIO-VOID.
	CALL 'DESFIOCTL' USING '<VID>'.
	CALL 'DESFIOCTL' USING '<OUT>'.
	MOVE '$ ''BAT''' TO CTL.
	CALL 'DESFIOCTL' USING '<PUT>'.
LUP-MAIN.
	DISPLAY 'REL> ' WITH NO ADVANCING.
	ACCEPT WSS-ENTI WITH CONVERSION.
	IF WSS-ENTI = 'E' OR 'EX' OR 'EXI' OR 'EXIT'
		GO TO FIN-MAIN.
	CALL 'DESGENREL' USING WSS-SECT.
	IF NOT WSS-STAT-OKS
		DISPLAY WSS-MENS.
	GO TO LUP-MAIN.
FIN-MAIN.
	CALL 'DESFIOREL' USING '<CLO>'.
	CALL 'DESFIOCTL' USING '<CLO>'.
	STOP RUN.
