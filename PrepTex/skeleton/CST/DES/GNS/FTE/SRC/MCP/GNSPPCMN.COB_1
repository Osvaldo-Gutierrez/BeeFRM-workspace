$SET SHARING = SHAREDBYALL
 BEGIN
      
 LIBRARY COMSSUPPORT (LIBACCESS = BYFUNCTION,
                      FUNCTIONNAME = "COMSSUPPORT");
      
 INTEGER PROCEDURE PA_REQUEST (REQUEST, RESPONSE);
   REAL ARRAY
   REQUEST,
   RESPONSE [*];
   LIBRARY COMSSUPPORT;
      
 DEFINE
 % HEADER UBICADO AL COMIENZO DE LOS ARREGLOS REQUEST Y RESPONSE
 % USADOS PARA COMUNICARSE CON EL PAF COMS.
   HEADER_ERRORVALUEX  = 0#, % VALOR CON ERROR RETORNADO POR COMS
   HEADER_COMMANDX     = 1#, % COMMAND VALUE USER IS REQUESTING
   HEADER_VARIANTX     = 2#, % VARIANT VALUE USER IS REQUESTING
   HEADER_TAGX         = 3#, % TAG FIELD IS FOR USER'S PERSONAL USE
   HEADER_FORMATLEVELX = 4#, % FORMAT (VERSION) LEVEL OF MESSAGE
   LEVEL4V             = 4#, % 4 IS THE ONLY VALID FORMAT LEVEL
   HEADER_TIMESTAMPX   = 5#, % TIME STAMP TIME(7) RETURNED BY COMS
   HEADER_WARNINGX     = 6#, % WARNING VALUE RETURNED BY COMS
   HEADER_ERROROFFSETX = 7#, % OFFSET TO ERROR RETURNED BY COMS
   HEADER_RESERVED1X   = 8#, % RESERVED
   HEADER_RESERVED2X   = 9#, % RESERVED
   DATARECORD_STARTX   =10#; % STARTING LOCATION OF DATARECORD
      
 PROCEDURE COMANDO_COMS(E, S);
   EBCDIC ARRAY E, S[0];
   BEGIN
   REAL ARRAY REQUEST [0] = E;
   REAL ARRAY RESPONSE [0] = S;
      
   IF SIZE(REQUEST) <= 6 THEN
      RESIZE (REQUEST, 255, RETAIN);
   REQUEST[HEADER_FORMATLEVELX] := LEVEL4V;
      
   PA_REQUEST (REQUEST, RESPONSE); % *** LLAMA COMS ****
   END OF COMANDO_COMS;
      
 EXPORT COMANDO_COMS;
 FREEZE (TEMPORARY);
 END.
