$!	P1 = Archivo Entrada,     P2 = Archivo Salida
$!	P3 = Modulo1.Extension1, [P4 = Modulo2.Extension2]
$	IF P1 .EQS. "" .OR. P2 .EQS. "" .OR. P3 .EQS. "" THEN EXIT
$	ON WARNING   THEN GOTO ERR
$	ON CONTROL_Y THEN GOTO ERR
$ MAIN:
$	IF F$MODE() .EQS. "BATCH" THEN 'BAT'
$	IF F$SEARCH("''P1'") .NES. "" THEN GOTO LB1
$	WRITE SYS$OUTPUT "[1m[A[K",-
	"		ERROR : NO Existe Archivo ''P1' [0m"
$	EXIT 6
$ LB1:
$	@GNSCOM:BUSFIL 'P3'
$	IF GNS$ARC .NES. "" .AND. GNS$UBI .NES. "[]" THEN -
                                             COPY/NOLOG  'GNS$ARC' []
$	IF GNS$ARC .EQS. "" THEN CREATE      'P3'
$	LB1 = GNS$UBI
$ LB2:
$	LB2 = ""
$	IF P4 .EQS. "" THEN GOTO PROC
$	@GNSCOM:BUSFIL 'P4'
$	IF GNS$ARC .NES. "" .AND. GNS$UBI .NES. "[]" THEN -
                                             COPY/NOLOG  'GNS$ARC' []
$	IF GNS$ARC .EQS. "" THEN CREATE      'P4'
$	LB2 = GNS$UBI
$ PROC:
$	@GNSCOM:FIL 'P1'
$	FIL = GNS$FIL
$	IF P5 .NES. "" THEN P5 = "/COMMAND=''P5'"
$!	PREPTEX 'P1' 'P2'/CONTROL="*%"/UNDEFINED=ZERO/NOSHOW'P5'
$!!!JSS 28-SEP-1993
$	INP = P1
$	IF F$SEARC("''GNS$PRY'SRCCMN:''GNS$PRY'DES.SRC") .NES. "" THEN -
		INP = "''P1',''GNS$PRY'SRCCMN:''GNS$PRY'DES.SRC"
$!!!
$	OPEN/WRITE FILE	TMP:PGM'FIL'.COM
$	WRITE FILE "$ PTX"
$!	WRITE FILE "''INP' ''P2'/CONTROL=""*%""/UNDEFINED=ZERO/NOSHOW''P5'"
$	WRITE FILE "''P1' ''P2'/CONTROL=""*%""/UNDEFINED=ZERO/NOSHOW''P5'"
$	WRITE FILE "$ EXIT"
$	CLOSE FILE
$	@TMP:PGM'FIL'.COM
$
$	IF LB1 .EQS. "[]" THEN PUT 'P3'
$	IF LB2 .EQS. "[]" THEN PUT 'P4'
$ FIN:
$	SET NOON
$	IF LB1 .EQS. "" THEN DELETE/NOLOG/NOCONFIRM 'P3'.*
$	IF P4  .NES. "" THEN -
	   IF LB2 .EQS. "" THEN DELETE/NOLOG/NOCONFIRM 'P4'.*
$	DELETE/NOLOG/NOCONFIRM TMP:PGM'FIL'.COM;*
$	EXIT
$ ERR:
$	SET NOCONTROL=Y
$	SET NOON
$	IF LB1 .NES. "[]" THEN DELETE/NOLOG/NOCONFIRM 'P3'.*
$	IF P4  .NES. "" THEN -
	   IF LB2 .NES. "[]" THEN DELETE/NOLOG/NOCONFIRM 'P4'.*
$	DELETE/NOLOG/NOCONFIRM TMP:PGM'FIL'.COM;*
$	EXIT 6
