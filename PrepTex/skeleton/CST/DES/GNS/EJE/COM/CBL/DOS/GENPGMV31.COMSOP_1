$	SET NOVER
$ P1:
$	IF P1 .NES. "" THEN GOTO MAIN
$	IF F$MODE() .EQS. "BATCH" THEN EXIT
$	INQUIRE P1 "Programa ? "
$	GOTO P1
$ MAIN:
$	ON WARNING   THEN GOTO ERR
$	ON CONTROL_Y THEN GOTO ERR
$	IF F$MODE() .EQS. "BATCH" THEN 'BAT'
$	WRITE SYS$OUTPUT "[5m[1m",-
		"			Generando...[0m"
$	QLF == "$GNSEXE:PROQLF"
$	QLF /NOCMA/CPP=ING,MOD,ACT,ELI,ACC,PGM,DEF,ALL/OUT=*/CDA=*/OPT=CON,UPD 'P2'
$	IF CPP .EQS. "" THEN CPP = "DEF"
$	IF OUT .EQS. "" THEN OUT = P1
$	IF CDA .EQS. "" THEN CDA = P1
$	IF NOCMA .EQS. ""      THEN NOCMA = "FALSE"
$	IF NOCMA .EQS. "NOCMA" THEN NOCMA = "TRUE"
$
$	FIL = P1
$	SKL = "GNSSRCSOP:GNSPKFRM.SRCSOP"
$	IF OPT .EQS. "CON" THEN SKL = "GNSSRCSOP:GNSPQFRM.SRCSOP"
$	IF OPT .EQS. "UPD" THEN SKL = "GNSSRCSOP:GNSPUFRM.SRCSOP"
$	GNS$MSG = ""
$	RUN GNSEXE:GENPGM
$	IF GNS$MSG .NES. "" THEN EXIT
$
$	@GNSCOM:BUSFIL "''BIF'.AIU"
$	IF GNS$ARC .NES. "" .AND. GNS$UBI .NES. "[]" THEN -
                                             COPY/NOLOG  'GNS$ARC' []
$	IF GNS$ARC .EQS. "" THEN CREATE 'BIF'.AIU
$	MOD = GNS$UBI
$
$ PROC:
$	P3 = "(PGM_''GNS$SOP'=TRUE,PGM_''GNS$LNG'=TRUE,PGM_''GNS$AIO'=TRUE,PGM_''GNS$AIU'=TRUE,PGM_''GNS$VRS'=TRUE,PGM_''GNS$PAI'=TRUE,PGM_''GNS$CLI'=TRUE,NOCOMMAREA=''NOCMA')"
$	PTX PGM'OUT'.PTX 'OUT'.TEM/NOSHOW/UNDEFINED=ZERO/COMMAND='P3'
$	IF GNS$AIO .EQS. "DTC" THEN -
		GENPTX 'OUT'.TEM 'OUT'.PGD 'CDA'.TXT 'CDA'.GEN 'P3'
$	IF GNS$AIO .EQS. "VSI" THEN -
		GENPTX 'OUT'.TEM 'OUT'.PGI 'CDA'.TXT 'CDA'.GEN 'P3'
$	IF GNS$AIO .EQS. "DB2" THEN -
		GENPTX 'OUT'.TEM 'OUT'.PG2 'CDA'.TXT 'CDA'.GEN 'P3'
$	IF MOD .EQS. "[]" THEN PUT 'BIF'.AIU
$ FIN:
$	SET NOON
$	DELETE/NOLOG/NOCONFIRM	PGM'OUT'.PTX.*
$	IF MOD .NES. "[]" THEN DELETE/NOLOG/NOCONFIRM 'BIF'.AIU.*
$	IF GNS$AIO .EQS. "DTC" THEN TEX = "PGD"
$	IF GNS$AIO .EQS. "VSI" THEN TEX = "PGI"
$	IF GNS$AIO .EQS. "DB2" THEN TEX = "PG2"
$	WRITE SYS$OUTPUT "[1m[A[K", -
		"			''OUT'.''TEX' Generado[0m"
$	EXIT
$ ERR:
$	IF GNS$MSG .NES. "" THEN EXIT
$	SET NOCONTROL=Y
$	SET NOON
$	DELETE/NOLOG/NOCONFIRM	PGM'OUT'.PTX.*
$	WRITE SYS$OUTPUT "[1m[A[K ERROR[0m"
$	SET CONTROL=Y
$	IF MOD .NES. "[]" THEN DELETE/NOLOG/NOCONFIRM 'BIF'.AIU.*
$	EXIT
