$	SET NOVER
$ P1:
$	IF P1 .NES. "" THEN GOTO MAIN
$	IF F$MODE() .EQS. "BATCH" THEN EXIT
$	INQUIRE P1 "Modulo ? "
$	GOTO P1
$ MAIN:
$	IF F$MODE() .EQS. "BATCH" THEN 'BAT'
$!	WRITE SYS$OUTPUT "[5m[1m",-
$!!!>>$	WRITE SYS$OUTPUT "[1m",-
$!!!>>		" Gensrc: ''P1'.SRCAIU [5m *** [0m"
$ ASS:	
$	ASS SRC'P1'.LOG SYS$OUTPUT
$	ASS SRC'P1'.LOG SYS$ERROR
$ AIU:
$	@GNSCOM:BUSFIL "''P1'.AIU"
$	IF GNS$ARC .NES. "" .AND. GNS$UBI .NES. "[]" THEN -
                                             COPY/NOLOG  'GNS$ARC' []
$	AIU = GNS$UBI
$	IF GNS$ARC .NES. "" THEN GOTO QLF
$ NAIU:
$!	WRITE SYS$OUTPUT "[1m[A[K",-
$	WRITE SYS$OUTPUT "[1m[K",-
	"		ERROR : NO Existe Archivo ''P1'.AIU[0m"
$	GOTO ERR
$ QLF:
$	IF P2 .EQS. "" THEN P2 = "/CDA=" + P1 + "/OUT=" + P1
$	QLF == "$GNSEXE:PROQLF"
$	QLF /CDA=*/OUT=* 'P2'
$	IF CDA .EQS. "" THEN CDA = P1
$	IF OUT .EQS. "" THEN OUT = P1
$	ENT = "''P1'.AIU"
$!	IF CDA .EQS. P1 THEN GOTO PROC
$	x = f$extrac(0,3,p1)
$	y = f$extrac(5,3,p1)
$	IF "''CDA'" .EQS. "''X'BM''Y'" THEN GOTO PROC
$	OPEN/WRITE FILE_OUTPUT 'P1'.EDT
$	WRITE FILE_OUTPUT "S/''X'BM''Y'.TXT/''CDA'.TXT/W"
$	WRITE FILE_OUTPUT "EXIT"
$	CLOSE FILE_OUTPUT
$!
$	ASS 'P1'.LOG SYS$OUTPUT
$	EDITT/COMMAND='P1'.EDT 'P1'.AIU/OUTPUT='P1'.AIUTMP
$	DEASS SYS$OUTPUT
$	DELETE/NOLOG/NOCONFIRM 'P1'.LOG;*
$	DELETE/NOLOG/NOCONFIRM 'P1'.EDT;
$	ENT = "''P1'.AIUTMP"
$ PROC:
$	ON WARNING THEN GOTO ERR
$	P3 = "(PGM_''GNS$SOP'=TRUE,PGM_''GNS$LNG'=TRUE,PGM_''GNS$AIO'=TRUE,PGM_''GNS$AIU'=TRUE,PGM_''GNS$VRS'=TRUE,PGM_''GNS$PAI'=TRUE,PGM_''GNS$CLI'=TRUE)"
$!	GENPTX 'ENT' 'P1'.SRCAIU 'CDA'.TXT 'CDA'.GEN 'P3'
$	GENPTX 'ENT' 'OUT'.SRCAIU 'CDA'.TXT 'CDA'.GEN 'P3'
$!JSS-INI 13-APR-1995 19:06:12 
$	IF GNS$AIU .EQS. "SCC" THEN EDITT/COMMAND=GNSCOMSOP:EDTPGM.COMSOP 'OUT'.SRCAIU
$!JSS-FIN 13-APR-1995 19:06:23
$	IF AIU .EQS. "[]" THEN PUT 'P1'.AIU
$	IF AIU .NES. "[]" THEN DELETE/NOLOG/NOCONFIRM 'P1'.AIU.*
$	IF ENT .EQS. "''P1'.AIUTMP" THEN DELETE/NOLOG/NOCONFIRM 'P1'.AIUTMP;*
$	DEASS SYS$OUTPUT
$	DEASS SYS$ERROR
$!!	DELETE/NOLOG/NOCONFIRM SRC'P1'.LOG.*
$	WRITE SYS$OUTPUT "[1m[K",-
		" Gensrc: ''OUT'.SRCAIU Generado [0m"
$	EXIT
$ ERR:
$	DEASS SYS$OUTPUT
$	DEASS SYS$ERROR
$	SET CONTROL=Y
$ EMS:
$	IF F$MODE() .EQS. "BATCH" THEN EXIT
$!!	WRITE SYS$COMMAND "[1m[A[K ERROR[0m"
$!!	TYPE SRC'P1'.LOG
$	EXIT
