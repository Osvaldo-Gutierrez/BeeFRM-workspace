$! separa archivos transferidos desde un compuatdor IBM, los
$! cuales vienen todos concatenados segun norma
$! "INI   *    MODULO" y
$! "FIN   *    MODULO"
$ P1:
$	ON ERROR     THEN CONTINUE
$	ON WARNING   THEN CONTINUE
$	ON CONTROL_Y THEN GOTO DEL
$	ASS SEPFIL.LOG SYS$OUTPUT
$	ASS SEPFIL.LOG SYS$ERROR
$	CLOSE FILE_INPUT
$	CLOSE FILE_OUTPUT
$	DEASSIGN SYS$OUTPUT
$	DEASSIGN SYS$ERROR
$	DEL/NOLOG/NOCONF SEPFIL.LOG.*
$	IF P1 .NES. "" THEN GOTO MAIN
$	IF F$MODE() .EQS. "BATCH" THEN EXIT
$	INQUIRE P1 "Archivo entrada ? "
$	GOTO P1
$ MAIN:
$	IF F$MODE() .EQS. "BATCH" THEN 'BAT'
$	ON WARNING   THEN EXIT
$	ON CONTROL_Y THEN EXIT
$	WRITE SYS$OUTPUT "[5m[1m		Generando...[0m"
$	@GNSCOM:FIL 'P1'
$	IF F$MODE() .EQS. "BATCH" THEN SET NOVER
$	IF GNS$EXT .EQS. "" THEN GNS$EXT = "HST"
$	OPEN/READ  FILE_INPUT  'GNS$FIL'.'GNS$EXT'
$	ON WARNING   THEN GOTO CLI
$	ON CONTROL_Y THEN GOTO CLI
$ FST:
$	READ/END_OF_FILE=FIN FILE_INPUT REG
$	IF F$LOCATE("INI   *    MODULO",REG) .EQS. F$LENGTH(REG) THEN GOTO FST
$	FILEO = F$EXTRACT(29,8,REG)
$	FILEO = F$EDIT(FILEO,"TRIM")
$	FILEO = FILEO + ".VAX"
$	OPEN/WRITE FILE_OUTPUT 'FILEO'
$	ON WARNING   THEN GOTO CLO
$	ON CONTROL_Y THEN GOTO CLO
$	LAN = ""
$ LEE:
$	READ/END_OF_FILE=FIN FILE_INPUT REG
$	IF F$LOCATE("INI   *    MODULO",REG) .EQS. F$LENGTH(REG) THEN GOTO WRT
$	FILEO = F$EXTRACT(29,8,REG)
$	FILEO = F$EDIT(FILEO,"TRIM")
$	FILEO = FILEO + ".VAX"
$	CLOSE FILE_OUTPUT
$	OPEN/WRITE FILE_OUTPUT 'FILEO'
$	READ/END_OF_FILE=FIN FILE_INPUT REG
$ WRT:
$	IF F$LOCATE("FIN   *    MODULO",REG) .NES. F$LENGTH(REG) THEN GOTO NOWRT
$	WRITE FILE_OUTPUT REG
$ NOWRT:
$	GOTO LEE
$ FIN:
$	WRITE SYS$OUTPUT "[A[2K"
$	WRITE SYS$OUTPUT "[1m		",-
	"Archivos Generados [0m"
$ CLO:
$	CLOSE FILE_INPUT
$	CLOSE FILE_OUTPUT
$ CLI:
$	GOTO DEL
$ DEL:
$	DEASS SYS$OUTPUT
