$ P1:
$	IF P1 .NES. "" THEN GOTO MAIN
$	IF F$MODE() .EQS. "BATCH" THEN EXIT
$	INQUIRE P1 "Programa ? "
$	GOTO P1
$ MAIN:
$	ON WARNING   THEN GOTO ERR
$	ON CONTROL_Y THEN GOTO ERR
$	IF P2 .NES. "" THEN GOTO TXT
$	IF F$MODE() .EQS. "BATCH" THEN 'BAT'
$	WRITE SYS$OUTPUT "[5m[1m",-
		"			Generando...[0m"
$	IF F$SEARCH("''P1'.TEM") .NES. "" THEN GOTO ASS
$	WRITE SYS$OUTPUT "[1m[A[K",-
	"		ERROR : NO Existe Archivo " + P1 + ".TEM[0m"
$	EXIT
$ ASS:	
$	ASS COB'P1'.LOG SYS$OUTPUT
$	ASS COB'P1'.LOG SYS$ERROR
$ TXT:
$	MOD = ""
$	TXT = F$SEARCH("''P1'.TXT")
$	IF TXT .EQS. "" THEN GOTO LTXT
$	MOD = P1
$	GOTO GEN
$ LTXT:
$	ON WARNING THEN GOTO NTXT
$	LIBRARY/NOLOG TXT/EXT='P1'/OUT='P1'
$	MOD = P1
$	GOTO GEN
$ NTXT:
$	OPEN/WRITE FILE 'P1'.TXT
$	CLOSE FILE
$ GEN:
$	ON WARNING THEN GOTO ERR
$	GEN = F$SEARCH("''P1'.GEN")
$	IF GEN .NES. "" THEN GOTO PROC
$	ON WARNING THEN GOTO NGEN
$	LIBRARY/NOLOG GEN/EXT='P1'/OUT='P1'.GEN
$	GOTO PROC
$ NGEN:
$	OPEN/WRITE FILE 'P1'.GEN
$	CLOSE FILE
$ PROC:
$	ON WARNING THEN GOTO ERR
$	OPEN/WRITE FILE	COB'P1'.COM
$	WRITE FILE "$ PTX"
$	WRITE FILE P1 + ".TEM " + P1 + -
		".COB/CONTROL=""*%""/UNDEFINED=ZERO/NOSHOW"
$	WRITE FILE "$ EXIT"
$	CLOSE FILE
$	@COB'P1'.COM
$	FIL = P1
$	IF MOD .NES. "" THEN RUN DESEXE:DESDOCTXT
$	IF TXT .NES. "" THEN LIBINS TXT 'P1'
$	IF GEN .NES. "" THEN LIBINS GEN 'P1'
$
$ FIN:
$	SET NOON
$	DELETE/NOLOG/NOCONFIRM	COB'P1'.COM.*
$	IF TXT .EQS. "" THEN DELETE/NOLOG/NOCONFIRM 'P1'.TXT.*
$	IF GEN .EQS. "" THEN DELETE/NOLOG/NOCONFIRM 'P1'.GEN.*
$	IF P2 .NES. "" THEN GOTO FMS
$	DEASS SYS$OUTPUT
$	DEASS SYS$ERROR
$	DELETE/NOLOG/NOCONFIRM	COB'P1'.LOG.*
$ FMS:
$	IF F$MODE() .NES. "BATCH" THEN-
		WRITE SYS$COMMAND "[1m[A[K",-
		"			" + P1 + ".COB Generado[0m"
$	EXIT
$ ERR:
$	SET NOCONTROL=Y
$	SET NOON
$	CLOSE FILE
$	DELETE/NOLOG/NOCONFIRM	COB'P1'.COM.*
$	IF TXT .EQS. "" THEN DELETE/NOLOG/NOCONFIRM 'P1'.TXT.*
$	IF GEN .EQS. "" THEN DELETE/NOLOG/NOCONFIRM 'P1'.GEN.*
$	IF P2 .NES. "" THEN GOTO EMS
$	DEASS SYS$OUTPUT
$	DEASS SYS$ERROR
$	SET CONTROL=Y
$ EMS:
$	IF F$MODE() .EQS. "BATCH" THEN EXIT
$	WRITE SYS$COMMAND "[1m[A[K ERROR[0m"
$	TYPE COB'P1'.LOG
$	EXIT
