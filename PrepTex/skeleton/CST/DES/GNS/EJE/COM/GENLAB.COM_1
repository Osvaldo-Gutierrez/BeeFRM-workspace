$ P1:
$	IF P1 .NES. "" THEN GOTO MAIN
$	IF F$MODE() .EQS. "BATCH" THEN EXIT
$	INQUIRE P1 "Archivo ? "
$	GOTO P1
$ MAIN:
$	IF F$MODE() .EQS. "BATCH" THEN 'BAT'
$	ON WARNING   THEN EXIT
$	ON CONTROL_Y THEN EXIT
$	WRITE SYS$OUTPUT "[5m[1m		Generando...[0m"
$	@GNSCOM:FIL 'P1' "TEM"
$	IF F$MODE() .EQS. "BATCH" THEN SET NOVER
$	P2 = GNS$FIL
$	ON WARNING   THEN GOTO DEL
$	ON CONTROL_Y THEN GOTO DEL
$	SEARC 'GNS$PTH' "*% INCLUDE"/OUT='P2'.GLB
$	OPEN/READ  FILE_INPUT  'P2'.GLB
$	ON WARNING   THEN GOTO CLI
$	ON CONTROL_Y THEN GOTO CLI
$	OPEN/WRITE FILE_OUTPUT 'P2'.TXT
$	ON WARNING   THEN GOTO CLO
$	ON CONTROL_Y THEN GOTO CLO
$	WRITE FILE_OUTPUT "*%! Codigo adicional para archivo"
$	LAN = ""
$ LEE:
$	READ/END_OF_FILE=FIN FILE_INPUT REG
$	IF F$LOCATE("*% INCLUDE",REG) .EQS. F$LENGTH(REG) THEN GOTO LEE
$	LAB = F$ELEMENT(2," ",REG)
$	IF LAB .EQS. LAN THEN GOTO LEE
$	WRITE FILE_OUTPUT "*% IF " + LAB
$	WRITE FILE_OUTPUT "      *<<<< " + LAB
$	WRITE FILE_OUTPUT "      *>>>>"
$	WRITE FILE_OUTPUT "*% END"
$	LAN = LAB
$	GOTO LEE
$ FIN:
$	WRITE SYS$OUTPUT "[A[2K"
$	WRITE SYS$OUTPUT "[1m		",-
	"Generado ''P2'.TXT[0m"
$ CLO:
$	CLOSE FILE_OUTPUT
$ CLI:
$	CLOSE FILE_INPUT
$	GOTO DEL
$ DEL:
$	DELETE/NOLOG/NOCONFIRM 'P2'.GLB;*
