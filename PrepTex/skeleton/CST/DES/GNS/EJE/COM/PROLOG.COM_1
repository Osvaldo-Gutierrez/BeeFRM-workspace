$	OPR = F$EDIT(GNS$OPR,"TRIM")
$	IF F$TRNLNM("TMP") .EQS. "" THEN DEFINE/NOLOG TMP []
$
$	IF P1 .NES. "" THEN FIL = P1
$	IF P2 .NES. "" THEN KEY = P2
$	IF P3 .NES. "" THEN CHR = P3
$	IF P4 .NES. "" THEN FLA = P4
$	IF P5 .NES. "" THEN COL = P5
$	IF P6 .NES. "" THEN LNS = P6
$	IF P7 .NES. "" THEN CLS = P7
$	IF P8 .NES. "" THEN CLW = P8
$
$	IF P1 .EQS. "" THEN FIL = "TMP:''OPR'PROLOG.TMP"
$	IF P2 .EQS. "" THEN KEY = "RET,PF1,PF2,PF4"
$	IF P3 .EQS. "" THEN CHR = "I,H,V,B, "
$	IF P4 .EQS. "" THEN FLA = 3
$	IF P5 .EQS. "" THEN COL = 0
$	IF P6 .EQS. "" THEN LNS = 19
$	IF P7 .EQS. "" THEN CLS = "A"
$	IF P8 .EQS. "" THEN CLW = "N"
$	PRM = -
"I:Imprimir - H:Esclava - V:Ver - B:Borrar - PF1:Purge - PF2:Reporte - PF4:Salir"
$
$ DIR:
$	IF P1 .EQS. "" THEN ARC = F$SEARC("[]''OPR'*.LOG")
$	IF P1 .EQS. "" THEN IF ARC .EQS. "" THEN WRITE SYS$OUTPUT "No existen archivos de log"
$	IF P1 .EQS. "" THEN IF ARC .EQS. "" THEN EXIT
$ RFH:
$	IF P1 .EQS. "" THEN DIREC/COL=0/NOTRAI/SIZE/DATE/OUT=TMP:'OPR'PROLOG.TMP []'OPR'*.LOG
$	ON ERROR THEN GOTO FIN
$ MAIN:
$	RUN GNSEXE:PRODFL
$!	WRITE SYS$OUTPUT "REG : ",GNS$DFLREG
$!	WRITE SYS$OUTPUT "COD : ",GNS$DFLCOD
$!	WRITE SYS$OUTPUT "KEY : ",GNS$DFLKEY
$!	WRITE SYS$OUTPUT "CHR : ",GNS$DFLCHR
$	IF GNS$DFLKEY .EQS. "PF1" THEN GOTO PURGE
$	IF GNS$DFLKEY .EQS. "PF2" THEN GOTO REPOR
$	IF GNS$DFLKEY .EQS. "PF4" THEN GOTO FIN
$	IF GNS$DFLCHR .EQS. "I" THEN GOTO PRTQUE
$	IF GNS$DFLCHR .EQS. "H" THEN GOTO PRTHRD
$	IF GNS$DFLCHR .EQS. "V" THEN GOTO VER
$	IF GNS$DFLCHR .EQS. "B" THEN GOTO BORRAR
$	GOTO RFH
$ PRTQUE:
$	PRINT/NOFEED []'GNS$DFLCOD'
$	GOTO MAIN
$ PRTHRD:
$	SET TERMINAL/WIDTH=132
$	WRITE SYS$OUTPUT "[5i"
$	TYPE []'GNS$DFLCOD'
$	WRITE SYS$OUTPUT ""
$	WRITE SYS$OUTPUT "[4i"
$	SET TERMINAL/WIDTH=80
$	GOTO MAIN
$ VER:
$	DEFINE/NOLOG SYS$INPUT SYS$COMMAND
$	SET TERMINAL/WIDTH=132
$	EDITT/READ/COMM=GNSCOM:EDTINIREP.COM []'GNS$DFLCOD'
$	SET TERMINAL/WIDTH=80
$	GOTO MAIN
$ REPOR:
$!	@GNSCOM:PROREP "" "" "" "3" "" "9" "N" "A"
$	@GNSCOM:PROREP "" "" "" "" "" "" "" ""
$	GOTO FIN
$ PURGE:
$	PURGE []'OPR'*.LOG
$	RENAME/LOG []'OPR'*.LOG/EXC=*.*;1 *.*;1
$	GOTO FIN
$ BORRAR:
$	DELETE/LOG/CONFIRM []'GNS$DFLCOD'
$ FIN:
$	IF F$SEARC("TMP:''OPR'PROLOG.TMP;*") .NES. "" THEN -
           DELETE/NOLOG/NOCONFIRM TMP:'OPR'PROLOG.TMP;*
$	IF GNS$DFLCHR .EQS. "B" .OR. GNS$DFLKEY .EQS. "PF1" THEN GOTO DIR
