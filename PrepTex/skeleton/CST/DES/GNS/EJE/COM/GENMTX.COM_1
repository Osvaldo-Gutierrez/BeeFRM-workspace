$ P1:
$	WRITE SYS$OUTPUT "	Inicio "
$ show time
$ show time
$ show time
$	IF P1 .NES. "" THEN GOTO MAIN
$	IF F$MODE() .EQS. "BATCH" THEN EXIT
$	INQUIRE P1 "Archivo ? "
$	GOTO P1
$ MAIN:
$	ON WARNING   THEN GOTO ERR
$	ON CONTROL_Y THEN GOTO ERR
$	IF F$MODE() .EQS. "BATCH" THEN 'BAT'
$	GNS$USN = F$ELEMENT(0," ",F$GETJPI(0,"USERNAME"))
$!	WRITE SYS$OUTPUT "[5m[1m			Generando...[0m"
$!	WRITE SYS$OUTPUT "[5m[1m			Inciando GENMTX ...[0m"
$	IF F$LOCATE("/F",P1) .NES. F$LENGTH(P1) THEN GOTO LIB
$!	@GNSCOM:FIL 'P1' TPG
$	@GNSCOM:FIL 'P1' MTX
$	P1 = GNS$PTH
$	P2 = GNS$FIL
$	GOTO CON
$ LIB:
$	P2 = F$EXTRACT(F$LOCATE("=",P1)+1,F$LENGTH(P1),P1)
$ CON:
$!	ASS RPT'P2'.LOG SYS$OUTPUT
$!	ASS RPT'P2'.LOG SYS$ERROR
$!	PTH = P2 + ".TPG"
$	PTH = P2 + ".MTX"
$	IF F$MODE() .NES. "BATCH" THEN SET TERMINAL/WIDTH=132
$	WRITE SYS$OUTPUT "[5m[1m	***[0m		Iniciando GENMTX ...[5m[1m***       [0m"
$	RUN gnsexe:GENMTX234
$!   	RUN [cst.isilva.gns.genmtx]GENMTX234
$!	WRITE SYS$OUTPUT "[5m[1m",			GENMTX.EXE ya ejecutado...Procedimientos Complementarios Iniciados[0m"
$! SET VER
$       OPEN/WRITE FILE 'P2'PTX.COM
$       WRITE FILE "$ PTX"
$       WRITE FILE "''P2'" + "MXPTX" + ".PTX " + "''P2'" + "MXPTX" + ".AIU/CONTROL=""%""/UNDEFINED=ZERO/NOSHOW"
$       CLOSE FILE
$!       @'P2'PTX.COM
$       DEL/NOLOG 'P2'PTX.COM.
$	WRITE SYS$OUTPUT "[5m[1m ***[0m			Proceso Concluido[5m[1m ***[0m"
$!	APPEND 'GNS$FIL'MXFMT.AIU 'GNS$FIL'MXWS3.AIU
$!	DEL 'GNS$FIL'MXFMT.AIU.
$ FIN:
$	SET NOON
$!	DELETE/NOLOG/NOCONFIRM 'P2'.TPG.*
$!	DEASS SYS$OUTPUT
$!	DEASS SYS$ERROR
$!	DELETE/NOLOG/NOCONFIRM RPT'P2'.LOG.*
$!JSS 	WRITE SYS$OUTPUT "[A[2K"
$	WRITE SYS$OUTPUT "	fin normal "
$ show time
$ show time
$ show time
$	EXIT
$ ERR:
$	SET NOCONTROL=Y
$	SET NOON
$!	DEASS SYS$OUTPUT
$!	DEASS SYS$ERROR
$	WRITE SYS$OUTPUT "[1m[A[K ERROR[0m"
$!	TYPE RPT'P2'.LOG
$	SET CONTROL=Y
$	WRITE SYS$OUTPUT "	fin error"
$ show time
$ show time
$ show time
$	EXIT
